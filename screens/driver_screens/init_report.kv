<ReportScreen>:
    # Canvas principal con fondo #FFFCF2
    canvas.before:
        Color:
            rgba: 255/255, 252/255, 242/255, 1  # #FFFCF2
        Rectangle:
            pos: self.pos
            size: self.size
    
    BoxLayout:
        orientation: 'vertical'
        spacing: 0
        
        # HEADER - Altura fija 70dp
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(70)
            padding: [dp(15), dp(10)]
            spacing: dp(10)
            
            canvas.before:
                Color:
                    rgba: 204/255, 197/255, 185/255, 1  # #CCC5B9
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                Line:
                    width: dp(1)
                    rectangle: (self.x, self.y, self.width, self.height)
            
            # Título principal
            Label:
                text: "Reporte de Viaje"
                size_hint_x: 0.7
                font_size: sp(20)
                color: 20/255, 26/255, 28/255, 1  # #141A1C
                halign: 'left'
                valign: 'middle'
                bold: True
                text_size: self.size
            
            # Botón de cerrar sesión
            Button:
                text: "Cerrar Sesión"
                size_hint: None, None
                size: dp(120), dp(40)
                font_size: sp(12)
                bold: True
                color: 20/255, 26/255, 28/255, 1  # #141A1C
                background_color: 0, 0, 0, 0  # Transparente
                
                canvas.before:
                    Color:
                        rgba: 168/255, 159/255, 145/255, 1  # #A89F91
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(8)]
                    Color:
                        rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                    Line:
                        width: dp(1)
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(8))
                
                on_press: root.on_logout()
        
        # ÁREA DESCRIPCIÓN - Altura fija 60dp
        BoxLayout:
            size_hint_y: None
            height: dp(60)
            padding: [dp(20), dp(15)]
            
            canvas.before:
                Color:
                    rgba: 204/255, 197/255, 185/255, 1  # #CCC5B9
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                Line:
                    width: dp(1)
                    points: [self.x, self.y, self.x + self.width, self.y]
            
            Label:
                id: driver_name_label
                text: "Conductor: Cargando..."
                font_size: sp(16)
                color: 20/255, 26/255, 28/255, 1  # #141A1C
                halign: 'left'
                valign: 'middle'
                text_size: self.size
        
        # CONTENIDO PRINCIPAL
        BoxLayout:
            orientation: 'vertical'
            padding: [dp(15), dp(10)]
            
            ScrollView:
                canvas.before:
                    Color:
                        rgba: 204/255, 197/255, 185/255, 1  # #CCC5B9
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(12)]
                    Color:
                        rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                    Line:
                        width: dp(1)
                        rounded_rectangle: (self.x, self.y, self.width, self.height, dp(12))
                
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: [dp(20), dp(20)]
                    spacing: dp(20)
                    
                    # Campo ubicación de inicio
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: dp(90)
                        spacing: dp(8)
                        
                        Label:
                            text: "Ubicación de Inicio"
                            size_hint_y: None
                            height: dp(25)
                            font_size: sp(16)
                            color: 20/255, 26/255, 28/255, 1  # #141A1C
                            halign: 'left'
                            valign: 'middle'
                            bold: True
                            text_size: self.size
                        
                        BoxLayout:
                            size_hint_y: None
                            height: dp(50)
                            padding: [dp(2), dp(2)]
                            
                            canvas.before:
                                Color:
                                    rgba: 255/255, 252/255, 242/255, 1  # #FFFCF2
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(8)]
                                Color:
                                    rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                                Line:
                                    width: dp(1)
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(8))
                            
                            TextInput:
                                id: start_location_input
                                hint_text: "Ingrese la ubicación de inicio"
                                font_size: sp(16)
                                multiline: False
                                background_color: 0, 0, 0, 0  # Transparente
                                background_normal: ''
                                background_active: ''
                                foreground_color: 20/255, 26/255, 28/255, 1  # #141A1C
                                cursor_color: 20/255, 26/255, 28/255, 1  # #141A1C
                                padding: [dp(12), dp(8)]
                    
                    # Campo ubicación de destino
                    BoxLayout:
                        orientation: 'vertical'
                        size_hint_y: None
                        height: dp(90)
                        spacing: dp(8)
                        
                        Label:
                            text: "Ubicación de Destino"
                            size_hint_y: None
                            height: dp(25)
                            font_size: sp(16)
                            color: 20/255, 26/255, 28/255, 1  # #141A1C
                            halign: 'left'
                            valign: 'middle'
                            bold: True
                            text_size: self.size
                        
                        BoxLayout:
                            size_hint_y: None
                            height: dp(50)
                            padding: [dp(2), dp(2)]
                            
                            canvas.before:
                                Color:
                                    rgba: 255/255, 252/255, 242/255, 1  # #FFFCF2
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(8)]
                                Color:
                                    rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                                Line:
                                    width: dp(1)
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(8))
                            
                            TextInput:
                                id: end_location_input
                                hint_text: "Ingrese la ubicación de destino"
                                font_size: sp(16)
                                multiline: False
                                background_color: 0, 0, 0, 0  # Transparente
                                background_normal: ''
                                background_active: ''
                                foreground_color: 20/255, 26/255, 28/255, 1  # #141A1C
                                cursor_color: 20/255, 26/255, 28/255, 1  # #141A1C
                                padding: [dp(12), dp(8)]
                    
                    # Espaciador
                    Widget:
                        size_hint_y: None
                        height: dp(20)
                    
                    # Botón principal
                    BoxLayout:
                        size_hint_y: None
                        height: dp(50)
                        
                        Widget:
                            size_hint_x: 0.2
                        
                        Button:
                            text: "Iniciar Viaje"
                            size_hint_x: 0.6
                            font_size: sp(14)
                            bold: True
                            color: 20/255, 26/255, 28/255, 1  # #141A1C
                            background_color: 0, 0, 0, 0  # Transparente
                            
                            canvas.before:
                                Color:
                                    rgba: 168/255, 159/255, 145/255, 1  # #A89F91
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(8)]
                                Color:
                                    rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                                Line:
                                    width: dp(1)
                                    rounded_rectangle: (self.x, self.y, self.width, self.height, dp(8))
                            
                            on_press: root.on_start_trip()
                        
                        Widget:
                            size_hint_x: 0.2
                    
                    # Espaciador final
                    Widget:
                        size_hint_y: None
                        height: dp(20)
        
        # FOOTER - Altura fija 50dp
        BoxLayout:
            size_hint_y: None
            height: dp(50)
            padding: [dp(20), dp(10)]
            
            canvas.before:
                Color:
                    rgba: 204/255, 197/255, 185/255, 1  # #CCC5B9
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 20/255, 26/255, 28/255, 1  # #141A1C
                Line:
                    width: dp(1)
                    points: [self.x, self.y + self.height, self.x + self.width, self.y + self.height]
            
            Label:
                id: status_label
                text: "Estado: Preparando..."
                font_size: sp(14)
                color: 20/255, 26/255, 28/255, 0.7  # Texto secundario
                halign: 'center'
                valign: 'middle'
                italic: True