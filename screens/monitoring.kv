<DriverMonitoringScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 10

        canvas.before:
            Color:
                rgba: 1, 0.99, 0.95, 1  # Color de fondo (#FFFCF2 en rgba)
            Rectangle:
                pos: self.pos
                size: self.size

        # Header (t√≠tulo)
        Label:
            id: header_label
            text: "üß† Monitor de Atenci√≥n del Conductor"
            size_hint: 1, 0.1
            font_size: '20sp'

            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    width: 3
                    rectangle: (*self.pos, *self.size)

        # Body: agrupa video, reportes y bot√≥n
        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 0.8
            spacing: 10
            padding: 10

            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1   # borde negro para el body
                Line:
                    width: 3
                    rectangle: (*self.pos, *self.size)

            # Video (imagen)
            Image:
                id: img_widget
                size_hint_y: 0.5

                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 3
                        rectangle: (*self.pos, *self.size)

            # Cuadro para los reportes (gris)
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: 200
                spacing: 5

                # Reporte de ojos
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: 40
                    padding: 5
                    spacing: 5
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

                    Label:
                        id: eyes_report_label
                        text: "Reporte Ojos: "
                        size_hint_x: 0.3
                        font_size: '14sp'

                    Label:
                        id: eyes_message_label
                        text: "Esperando..."
                        size_hint_x: 0.7
                        font_size: '14sp'

                # Reporte de parpadeo
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: 40
                    padding: 5
                    spacing: 5
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

                    Label:
                        id: blink_report_label
                        text: "Reporte Parpadeo: "
                        size_hint_x: 0.3
                        font_size: '14sp'

                    Label:
                        id: blink_message_label
                        text: "Esperando..."
                        size_hint_x: 0.7
                        font_size: '14sp'

                # Reporte de cabeceo
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: 40
                    padding: 5
                    spacing: 5
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

                    Label:
                        id: nod_report_label
                        text: "Reporte Cabeceo: "
                        size_hint_x: 0.3
                        font_size: '14sp'

                    Label:
                        id: nod_message_label
                        text: "Esperando..."
                        size_hint_x: 0.7
                        font_size: '14sp'

                # Reporte de bostezo
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: 40
                    padding: 5
                    spacing: 5
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size

                    Label:
                        id: yawn_report_label
                        text: "Reporte Bostezo: "
                        size_hint_x: 0.3
                        font_size: '14sp'

                    Label:
                        id: yawn_message_label
                        text: "Esperando..."
                        size_hint_x: 0.7
                        font_size: '14sp'

            # Bot√≥n para finalizar viaje debajo de los reportes
            Button:
                text: "Finalizar viaje"
                size_hint: 1, None
                height: "50dp"
                font_size: '16sp'
                on_press: root.end_trip()

        # Footer (estado)
        Label:
            id: footer_label
            text: "Estado: Iniciando..."
            size_hint: 1, 0.1
            font_size: '16sp'

            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    width: 3
                    rectangle: (*self.pos, *self.size)
